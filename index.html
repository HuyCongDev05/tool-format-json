<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Converter</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .header p {
            color: #718096;
            font-size: 1.1rem;
        }
        
        .input-section,
        .output-section {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .button-group {
            text-align: center;
            margin: 25px 0;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .secondary-btn {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }
        
        .info-box {
            background: #e6fffa;
            border: 1px solid #81e6d9;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .info-box h3 {
            color: #234e52;
            margin-top: 0;
        }
        
        .format-options {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .format-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .format-option input[type="radio"] {
            margin: 0;
        }
        
        .stats {
            background: #f7fafc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #667eea;
        }
        
        .error {
            background: #fed7d7;
            border: 1px solid #fc8181;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üç™ Cookie Converter</h1>
            <p>Chuy·ªÉn ƒë·ªïi Netscape cookies sang JSON format</p>
        </div>

        <div class="input-section">
            <label for="cookieInput">D√°n cookies Netscape format v√†o ƒë√¢y:</label>
            <textarea id="cookieInput" placeholder="D√°n n·ªôi dung file cookies c·ªßa b·∫°n v√†o ƒë√¢y...
V√≠ d·ª•:
chatgpt.com	FALSE	/	FALSE	1761001326	oai-hlib	true
.chatgpt.com	TRUE	/	FALSE	1771352729	oai-did	536367a0-cdd1-44a3-a0ec-66ac6bcd6d44"></textarea>
        </div>

        <div class="format-options">
            <label><strong>Ch·ªçn format JSON:</strong></label>
            <div class="format-option">
                <input type="radio" id="simple" name="format" value="simple" checked>
                <label for="simple">Simple (name: value)</label>
            </div>
            <div class="format-option">
                <input type="radio" id="detailed" name="format" value="detailed">
                <label for="detailed">Detailed (full info)</label>
            </div>
            <div class="format-option">
                <input type="radio" id="selenium" name="format" value="selenium">
                <label for="selenium">Selenium format</label>
            </div>
            <div class="format-option">
                <input type="radio" id="cookie-editor" name="format" value="cookie-editor">
                <label for="cookie-editor">Cookie Editor Extension</label>
            </div>
            <div class="format-option">
                <input type="radio" id="devtools" name="format" value="devtools">
                <label for="devtools">DevTools Manual (Name/Value table)</label>
            </div>
        </div>

        <div class="button-group">
            <button onclick="convertCookies()">üîÑ Convert to JSON</button>
            <button onclick="clearAll()" class="secondary-btn">üóëÔ∏è Clear All</button>
        </div>

        <div class="output-section">
            <label for="jsonOutput">JSON Output:</label>
            <textarea id="jsonOutput" readonly placeholder="JSON result s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>
            <button onclick="copyToClipboard()" style="margin-top: 10px;">üìã Copy JSON</button>
        </div>

        <div id="stats" class="stats" style="display: none;">
            <strong>Th·ªëng k√™:</strong> <span id="cookieCount"></span>
        </div>

        <div class="info-box">
            <h3>üí° H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</h3>
            <p><strong>Simple:</strong> Ch·ªâ t√™n v√† gi√° tr·ªã cookie - d√πng cho basic requests</p>
            <p><strong>Detailed:</strong> ƒê·∫ßy ƒë·ªß th√¥ng tin (domain, path, expires, v.v.) - d√πng cho automation tools</p>
            <p><strong>Selenium:</strong> Format ƒë·∫∑c bi·ªát cho Selenium WebDriver</p>
            <p><strong>Cookie Editor:</strong> Format ch√≠nh x√°c cho extension Cookie Editor (Chrome/Firefox)</p>
            <p><strong>DevTools Manual:</strong> Danh s√°ch t·ª´ng cookie v·ªõi t·∫•t c·∫£ field ƒë·ªÉ copy t·ª´ng c√°i m·ªôt v√†o DevTools</p>
        </div>
    </div>

    <script>
        function convertCookies() {
            const input = document.getElementById('cookieInput').value.trim();
            const format = document.querySelector('input[name="format"]:checked').value;
            const output = document.getElementById('jsonOutput');
            const errorDiv = document.querySelector('.error');

            if (errorDiv) errorDiv.remove();

            if (!input) {
                showError('Vui l√≤ng nh·∫≠p n·ªôi dung cookies!');
                return;
            }

            try {
                const lines = input.split('\n').filter(line => line.trim() && !line.startsWith('#'));
                const cookies = [];

                lines.forEach((line, index) => {
                    const parts = line.split('\t');
                    if (parts.length >= 6) {
                        const [domain, domainFlag, path, secure, expires, name, value] = parts;

                        let cookieObj;
                        switch (format) {
                            case 'simple':
                                cookieObj = {
                                    [name]: value || ''
                                };
                                cookies.push(cookieObj);
                                break;

                            case 'devtools':
                                // Format table cho DevTools manual entry
                                const expiresDate = expires === '0' ? 'Session' : new Date(parseInt(expires) * 1000).toLocaleString();
                                cookieObj = {
                                    Name: name,
                                    Value: value || '',
                                    Domain: domain,
                                    Path: path,
                                    Expires: expiresDate,
                                    Secure: secure === 'TRUE' ? 'Yes' : 'No',
                                    HttpOnly: domainFlag === 'TRUE' ? 'Yes' : 'No'
                                };
                                cookies.push(cookieObj);
                                break;

                            case 'detailed':
                                cookieObj = {
                                    name: name,
                                    value: value || '',
                                    domain: domain,
                                    path: path,
                                    secure: secure === 'TRUE',
                                    httpOnly: domainFlag === 'TRUE',
                                    expires: expires === '0' ? null : new Date(parseInt(expires) * 1000).toISOString()
                                };
                                cookies.push(cookieObj);
                                break;

                            case 'selenium':
                                cookieObj = {
                                    'name': name,
                                    'value': value || '',
                                    'domain': domain.startsWith('.') ? domain.substring(1) : domain,
                                    'path': path,
                                    'secure': secure === 'TRUE'
                                };
                                if (expires !== '0') {
                                    cookieObj.expiry = parseInt(expires);
                                }
                                cookies.push(cookieObj);
                                break;

                            case 'cookie-editor':
                                // Cookie Editor c·∫ßn format ƒë·∫∑c bi·ªát
                                cookieObj = {
                                    "domain": domain,
                                    "expirationDate": expires === '0' ? undefined : parseInt(expires),
                                    "hostOnly": domainFlag !== 'TRUE',
                                    "httpOnly": false,
                                    "name": name,
                                    "path": path,
                                    "sameSite": "no_restriction",
                                    "secure": secure === 'TRUE',
                                    "session": expires === '0',
                                    "storeId": "0",
                                    "value": value || ""
                                };
                                cookies.push(cookieObj);
                                break;
                        }
                    }
                });

                if (cookies.length === 0) {
                    showError('Kh√¥ng t√¨m th·∫•y cookies h·ª£p l·ªá trong d·ªØ li·ªáu ƒë·∫ßu v√†o!');
                    return;
                }

                let jsonResult;
                if (format === 'simple') {
                    // Merge t·∫•t c·∫£ simple objects th√†nh 1 object
                    jsonResult = Object.assign({}, ...cookies);
                } else if (format === 'devtools') {
                    // Format table d·ªÖ ƒë·ªçc cho DevTools
                    let tableOutput = "=== COOKIES FOR DEVTOOLS MANUAL ENTRY ===\n\n";
                    cookies.forEach((cookie, index) => {
                        tableOutput += `COOKIE ${index + 1}:\n`;
                        tableOutput += `Name: ${cookie.Name}\n`;
                        tableOutput += `Value: ${cookie.Value}\n`;
                        tableOutput += `Domain: ${cookie.Domain}\n`;
                        tableOutput += `Path: ${cookie.Path}\n`;
                        tableOutput += `Expires: ${cookie.Expires}\n`;
                        tableOutput += `Secure: ${cookie.Secure}\n`;
                        tableOutput += `HttpOnly: ${cookie.HttpOnly}\n`;
                        tableOutput += `${'='.repeat(50)}\n\n`;
                    });
                    output.value = tableOutput;
                    return;
                } else {
                    jsonResult = cookies;
                }

                output.value = JSON.stringify(jsonResult, null, 2);

                // Show stats
                document.getElementById('stats').style.display = 'block';
                document.getElementById('cookieCount').textContent = `ƒê√£ convert ${cookies.length} cookies`;

            } catch (error) {
                showError('L·ªói khi convert: ' + error.message);
            }
        }

        function showError(message) {
            const container = document.querySelector('.container');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error';
            errorDiv.textContent = message;
            container.insertBefore(errorDiv, document.querySelector('.output-section'));
        }

        function copyToClipboard() {
            const output = document.getElementById('jsonOutput');
            if (!output.value) {
                alert('Ch∆∞a c√≥ JSON ƒë·ªÉ copy!');
                return;
            }

            output.select();
            document.execCommand('copy');

            // Visual feedback
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '‚úÖ ƒê√£ copy!';
            btn.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';

            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
            }, 2000);
        }

        function clearAll() {
            document.getElementById('cookieInput').value = '';
            document.getElementById('jsonOutput').value = '';
            document.getElementById('stats').style.display = 'none';
            const errorDiv = document.querySelector('.error');
            if (errorDiv) errorDiv.remove();
        }

        // Auto-load sample data on page load
        window.addEventListener('load', () => {
            loadSampleData();
        });
    </script>
</body>

</html>